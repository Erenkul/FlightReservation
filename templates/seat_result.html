<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seat Confirmation - SkyVoyage Elite</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animation.css') }}">
</head>
<body>
  <custom-navbar></custom-navbar>

  <main class="confirmation-main">
    <div class="container confirmation-container">
      <div class="card confirmation-center">
        <div class="confirmation-success" style="color: #10b981; font-size: 4rem; margin-bottom: 1rem;">✓</div>
        
        <h1 class="confirmation-title">Seat Reserved!</h1>
        <p style="color: #666; margin-bottom: 2rem;">Your seat has been temporarily held. Please complete your booking.</p>

        <div style="background: linear-gradient(135deg, #f0fdf4, #e0f2fe); border: 2px solid #10b981; border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
          <div style="font-size: 3.5rem; font-weight: 800; color: #0f172a; margin-bottom: 0.5rem;" id="selectedSeatDisplay">--</div>
          <p style="margin: 0; color: #64748b; font-weight: 600;" id="seatTypeDisplay">Select a seat</p>
        </div>

        <div class="itinerary-section" style="text-align: left; background: #f8fafc; padding: 1.5rem; border-radius: 1rem; border: 1px solid var(--border);">
          <h3 style="margin-top: 0; margin-bottom: 1rem; color: var(--primary);">Selection Summary</h3>
          
          <div class="price-row" style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
            <span style="color: #64748b;">Passenger</span>
            <strong>John Doe</strong>
          </div>
          
          <div class="price-row" style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
            <span style="color: #64748b;">Seat(s)</span>
            <strong id="seatSummary">--</strong>
          </div>
          
          <div class="price-row" style="display: flex; justify-content: space-between; padding: 0.75rem 0; margin-top: 0.5rem;">
            <span style="font-weight: 700;">Total Price</span>
            <strong style="color: var(--accent); font-size: 1.2rem;">$1,635.50</strong>
          </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem; flex-direction: column;">
          <button class="btn btn-primary" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="completeBooking()">
            Complete Booking
          </button>
          
          <a href="{{ url_for('seat_selection') }}" class="btn btn-outline" style="width: 100%; padding: 1rem; text-decoration: none; text-align: center;">
            Change Seat
          </a>
        </div>
      </div>
    </div>
  </main>

  <custom-footer></custom-footer>

  <script src="{{ url_for('static', filename='components/navbar.js') }}"></script>
  <script src="{{ url_for('static', filename='components/footer.js') }}"></script>
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  
  <script>
    // Load selected seats from localStorage
    window.addEventListener('DOMContentLoaded', () => {
      const seats = JSON.parse(localStorage.getItem('skyvoyage_seats') || '[]');
      const seatDisplay = document.getElementById('selectedSeatDisplay');
      const seatType = document.getElementById('seatTypeDisplay');
      const seatSummary = document.getElementById('seatSummary');
      
      if (seats.length > 0) {
        // Tek koltuk gösterimi (ilk seçileni al)
        const mainSeat = seats[0];
        seatDisplay.textContent = mainSeat;
        seatSummary.textContent = seats.join(', ');
        
        // Koltuk tipini belirle
        const col = mainSeat.slice(-1);
        if (['A', 'F'].includes(col)) {
          seatType.textContent = 'Window Seat';
        } else if (['C', 'D'].includes(col)) {
          seatType.textContent = 'Aisle Seat';
        } else {
          seatType.textContent = 'Middle Seat';
        }
      } else {
        // Hiç koltuk seçilmediyse geri gönder
        window.location.href = "{{ url_for('seat_selection') }}";
      }
    });
    
    function completeBooking() {
      // Form oluşturup gönderme
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = "{{ url_for('confirm_booking') }}";
      
      // Koltuk bilgisini ekle
      const seats = JSON.parse(localStorage.getItem('skyvoyage_seats') || '[]');
      const input = document.createElement('input');
      input.type = 'hidden';
      input.name = 'selected_seat';
      input.value = seats[0] || '';
      
      form.appendChild(input);
      document.body.appendChild(form);
      form.submit();
    }
  </script>
</body>
</html>