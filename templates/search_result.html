<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Results - SkyVoyage Elite</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animation.css') }}">
</head>
<body>
  <custom-navbar></custom-navbar>

  <main class="search-main">
    <div class="container">
      <div class="search-header">
        <h1>Search Results</h1>
        <p id="search-details">
          {{ (search_meta.from_city ~ ' → ' ~ search_meta.to_city) if search_meta else 'Route' }}
          • {{ search_meta.flight_date if search_meta and search_meta.flight_date else 'Flexible Date' }}
        </p>
      </div>

      <div class="flight-results" id="flight-results">
        {% if flights %}
          {% for flight in flights %}
            <form class="card flight-card" method="POST" action="{{ url_for('select_flight') }}">
              <input type="hidden" name="flight_no" value="{{ flight.flight }}">
              <input type="hidden" name="depart_time" value="{{ flight.depart_time }}">
              <input type="hidden" name="arrival_time" value="{{ flight.arrival_time }}">
              <input type="hidden" name="gate" value="{{ flight.gate }}">
              <input type="hidden" name="aircraft" value="{{ flight.aircraft }}">
              <input type="hidden" name="price" value="{{ flight.price }}">

              <div class="flight-info">
                <div class="flight-time-block">
                  <div class="flight-time">{{ flight.depart_time }}</div>
                  <div class="flight-route">
                    <div class="flight-route-airports">{{ flight.flight }}</div>
                    <div class="flight-route-line">
                      <div></div>
                      <span>→</span>
                      <div></div>
                    </div>
                    <div class="flight-duration">Gate {{ flight.gate }}</div>
                  </div>
                  <div style="text-align: right;">
                    <div class="flight-time">{{ flight.arrival_time }}</div>
                    <div class="flight-route-airports">{{ flight.aircraft }}</div>
                  </div>
                </div>
                <p class="flight-description">Operated by SkyVoyage Elite</p>
              </div>
              <div class="flight-price-block">
                <div class="flight-price">${{ '%.2f'|format(flight.price) }}</div>
                <p class="flight-price-label">per passenger</p>
                <button class="btn btn-primary" type="submit">Select</button>
              </div>
            </form>
          {% endfor %}
        {% else %}
          <div class="card empty-state">
            <p class="eyebrow">No flights found</p>
            <h2>Try a different search</h2>
            <a class="btn btn-primary" href="{{ url_for('index') }}">Back to search</a>
          </div>
        {% endif %}
      </div>
    </div>
  </main>

  <custom-footer></custom-footer>

  <!-- Floating Globe Button -->
  <button class="globe-button" title="City Selector (Coming Soon)">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="2" y1="12" x2="22" y2="12"></line>
      <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
    </svg>
  </button>

  <script src="{{ url_for('static', filename='components/navbar.js') }}"></script>
  <script src="{{ url_for('static', filename='components/footer.js') }}"></script>
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
