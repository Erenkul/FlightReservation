<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Results - SkyVoyage Elite</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/animation.css">
</head>
<body>
  <custom-navbar></custom-navbar>

  <main class="search-main">
    <div class="container">
      <div class="search-header">
        <h1>Search Results</h1>
        <p id="search-details">New York (JFK) → London (LHR) • Round Trip • 2 Adults</p>
      </div>

      <div class="card search-filters">
        <select>
          <option>Sort by: Lowest Price</option>
          <option>Earliest Departure</option>
          <option>Shortest Duration</option>
        </select>
        <button class="btn btn-outline">Stops</button>
        <button class="btn btn-outline">Airlines</button>
        <button class="btn btn-outline">Time</button>
      </div>

      <div class="flight-results" id="flight-results">
        <!-- Flights will be rendered here by JS -->
      </div>
    </div>
  </main>

  <custom-footer></custom-footer>

  <!-- Floating Globe Button -->
  <button class="globe-button" title="City Selector (Coming Soon)">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="2" y1="12" x2="22" y2="12"></line>
      <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
    </svg>
  </button>

  <script src="components/navbar.js"></script>
  <script src="components/footer.js"></script>
  <script src="js/script.js"></script>
  <script>
    function renderFlights(flights) {
      const resultsContainer = document.getElementById('flight-results');
      resultsContainer.innerHTML = '';
      
      flights.forEach(flight => {
        const flightCard = document.createElement('div');
        flightCard.className = 'card flight-card';
        flightCard.innerHTML = `
          <div class="flight-info">
            <div class="flight-time-block">
              <div class="flight-time">${flight.departTime}</div>
              <div class="flight-route">
                <div class="flight-route-airports">${flight.from}</div>
                <div class="flight-route-line">
                  <div></div>
                  <span>→</span>
                  <div></div>
                </div>
                <div class="flight-duration">${flight.duration}</div>
              </div>
              <div style="text-align: right;">
                <div class="flight-time">${flight.arrivalTime}</div>
                <div class="flight-route-airports">${flight.to}</div>
              </div>
            </div>
            <p class="flight-description">${flight.stops} • ${flight.airline} • ${flight.aircraft}</p>
          </div>
          <div class="flight-price-block">
            <div class="flight-price">$${flight.price}</div>
            <p class="flight-price-label">per passenger</p>
            <button class="btn btn-primary" onclick="selectFlight('${flight.flight}', ${flight.price})">Select</button>
          </div>
        `;
        resultsContainer.appendChild(flightCard);
      });
    }
    
    function selectFlight(flightNumber, price) {
      sessionStorage.setItem('selectedFlight', flightNumber);
      sessionStorage.setItem('flightPrice', price);
      window.location.href = 'booking.html';
    }
    
    window.addEventListener('load', () => {
      const flights = JSON.parse(sessionStorage.getItem('flights')) || generateDummyFlights();
      renderFlights(flights);
    });

    function generateDummyFlights() {
      return [
        {
          flight: 'BA123',
          from: 'JFK',
          to: 'LHR',
          departTime: '08:30',
          arrivalTime: '20:30',
          duration: '10h',
          stops: 'Non-stop',
          airline: 'British Airways',
          aircraft: 'Boeing 777',
          price: 675
        },
        {
          flight: 'AF456',
          from: 'JFK',
          to: 'LHR',
          departTime: '10:15',
          arrivalTime: '23:45',
          duration: '11h 30m',
          stops: '1 Stop (CDG)',
          airline: 'Air France',
          aircraft: 'Airbus A350',
          price: 545
        },
        {
          flight: 'LH789',
          from: 'JFK',
          to: 'LHR',
          departTime: '14:00',
          arrivalTime: '02:00',
          duration: '10h 00m',
          stops: 'Non-stop',
          airline: 'Lufthansa',
          aircraft: 'Boeing 787',
          price: 750
        }
      ];
    }
  </script>
</body>
</html>
